# OpenGL STLビューアー 仕様書

## 1. 概要
Windows上で動作するOpenGLを用いたSTLファイルビューアーアプリケーションです。

## 2. 基本仕様

### 2.1 アプリケーション形式
- **形式**: コマンドラインアプリケーション
- **実行方法**: `stl_viewer.exe <STLファイルパス>`
- **対応OS**: Windows 10/11

### 2.2 入力仕様
- **引数**: STLファイルへのパス（必須）
- **対応形式**: ASCII STL、Binary STL
- **エラーハンドリング**: ファイルが存在しない場合、形式が不正な場合のエラーメッセージ表示

### 2.3 表示仕様
- **ウィンドウサイズ**: 800x600ピクセル（デフォルト）
- **ウィンドウタイトル**: "STL Viewer - [ファイル名]"
- **背景色**: ダークグレー（RGB: 0.2, 0.2, 0.2）

## 3. 3D表示機能

### 3.1 モデル表示
- **レンダリング**: OpenGL 3.3 Core Profile
- **シェーディング**: Phongシェーディング
- **マテリアル**: デフォルトで白色（RGB: 0.8, 0.8, 0.8）
- **ライティング**: 単一のディレクショナルライト

### 3.2 カメラ制御
- **初期視点**: モデルの中心から見た等角投影
- **視野角**: 45度
- **ニアクリップ**: 0.1
- **ファークリップ**: 1000.0

### 3.3 マウス操作
- **左ドラッグ**: モデルの回転（軌道カメラ）
- **右ドラッグ**: カメラの平行移動
- **ホイール**: ズームイン/アウト
- **中ボタンドラッグ**: カメラの回転

## 4. 技術仕様

### 4.1 使用ライブラリ
- **OpenGL**: 3.3 Core Profile
- **GLFW**: ウィンドウ管理・イベント処理
- **GLM**: 数学ライブラリ（行列・ベクトル演算）
- **STB**: 画像読み込み（将来的な拡張用）

### 4.2 ファイル構造
```
opengl_cpp/
├── src/
│   ├── main.cpp          # エントリーポイント
│   ├── stl_loader.cpp    # STLファイル読み込み
│   ├── stl_loader.h
│   ├── renderer.cpp      # OpenGLレンダリング
│   ├── renderer.h
│   ├── camera.cpp        # カメラ制御
│   ├── camera.h
│   └── shader.cpp        # シェーダー管理
│   └── shader.h
├── shaders/
│   ├── vertex.glsl       # 頂点シェーダー
│   └── fragment.glsl     # フラグメントシェーダー
├── CMakeLists.txt        # ビルド設定
└── README.md             # 使用方法
```

### 4.3 クラス設計
- **STLLoader**: STLファイルの読み込み・解析
- **Renderer**: OpenGLレンダリング管理
- **Camera**: カメラ位置・方向の管理
- **Shader**: シェーダープログラムの管理

## 5. ビルド仕様

### 5.1 開発環境
- **コンパイラ**: MSVC 2019以降
- **CMake**: 3.16以降
- **C++標準**: C++17

### 5.2 依存関係
- GLFW3
- OpenGL 3.3
- GLM

### 5.3 ビルドコマンド
```bash
mkdir build
cd build
cmake ..
cmake --build . --config Release
```

## 6. エラーハンドリング

### 6.1 起動時エラー
- 引数が不足している場合
- STLファイルが存在しない場合
- STLファイル形式が不正な場合
- OpenGL初期化に失敗した場合

### 6.2 実行時エラー
- メモリ不足
- GPUドライバーエラー

## 7. パフォーマンス要件

### 7.1 表示性能
- **フレームレート**: 60FPS以上
- **対応ポリゴン数**: 100万面まで
- **メモリ使用量**: 512MB以下

### 7.2 最適化
- VBO（Vertex Buffer Object）使用
- インデックスバッファ使用
- フラスタムカリング（将来的な拡張）

## 8. 将来の拡張予定

### 8.1 機能拡張
- 複数STLファイルの同時表示
- マテリアル・テクスチャ対応
- 断面表示機能
- 測定機能

### 8.2 UI拡張
- ImGuiによるGUI
- 設定パネル
- ファイルドロップ対応

## 9. テスト仕様

### 9.1 単体テスト
- STLファイル読み込みテスト
- カメラ操作テスト
- シェーダーコンパイルテスト

### 9.2 統合テスト
- 各種STLファイルでの表示テスト
- マウス操作テスト
- パフォーマンステスト

## 10. 配布仕様

### 10.1 実行ファイル
- 単一のexeファイル
- 必要なDLLの同梱
- インストーラー不要

### 10.2 ライセンス
- MITライセンス
- オープンソース 